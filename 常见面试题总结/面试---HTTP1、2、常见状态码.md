### HTTP

HTTP请求有三部分组成，分别为：

- 请求行
- 首部
- 实体

请求行大概是这样的 ==GET /images/logo.gif HTTP/1.1==，基本有方法、URL、协议版本三者组成的。

**HTTP两个特点**

- HTTP是无连接的：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，立即断开连接，采用这种方式可以节省传输时间
- HTTP是无状态：HTTP协议是无状态协议，无状态是指协议对于事务处理没有记忆能力，缺少状态意味着如果后续处理需要前面的信息，则他必须重传，这样可能导致每次连接传输的数据量增大

**HTTP请求方法**

根据HTTP标准，请求可以使用多种请求方法。

HTTP1.0定义了三种：GET、POST、HEAD

HTTP1.1新增加了五种请求方法：PUT、DELETE、OPTIONS、TRACE、CONNECT

其中，get和post方法最为常见，put和delete方法也有很大的用处，在跨域情况下options方法也是很常见的

### 常见面试题：get和post的区别？

首先先引入副作用和幂等的概念

**副作用：**

副作用是指对服务器上的资源的改变，搜索是无副作用的，注册和更新是副作用的。

**幂等**

幂等指发送M和N次请求（两者不相同且都大于1），服务器上资源的状态一致，比如注册10个和11个账号是不幂等的，对文章进行更改10次和11次是幂等的。因为前者是多注册了一个账号，后者只是更新了同一个资源

根据定义而言：

- get方法用户获取资源，没有副作用，幂等的。
- delete方法用于删除资源，有副作用，但是副作用一直，所以满足幂等
- put方法用于更新资源，有副作用，是幂等的，因为只更新了同一个资源
- post方法用于创建资源，有副作用，不幂等的

**不同点：**

- get请求能缓存，post不能
- post相对于get安全一点，因为get的参数直接暴露在url中，所以不能用来传敏感信息
- get请求在url中的参数是有长度限制的
- post支持更多的编码类型且不对数据类型限制
- get产生一个TCP数据包，post产生两个TCP数据包

**为什么 get产生一个TCP数据包，post产生两个TCP数据包？**

对于get方式的请求，浏览器会把HTTP header和data一起发送出去，服务器响应200

对于post，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200

也就是说，GET只需要汽车跑一趟就把货送到了，而POST得跑两趟，第一趟，先去和服务器打个招呼“嗨，我等下要送一批货来，你们打开门迎接我”，然后再回头把货送过去。

因为POST需要两步，时间上消耗的要多一点，看起来GET比POST更有效。用GET替换POST来优化网站性能。但这是一个坑！跳入需谨慎。为什么？

1. GET与POST都有自己的语义，不能随便混用。
2. 据研究，在网络环境好的情况下，发一次包的时间和发两次包的时间差别基本可以无视。而在网络环境差的情况下，两次包的TCP在验证数据包完整性上，有非常大的优点。
3. 并不是所有浏览器都会在POST中发送两次包，Firefox就只发送一次。

### 常见状态码

1. 200：OK，表示从客户端发来的请求在服务器端正在被处理
2. 302：临时重定向，表示资源临时被分配了新的url
3. 304：表示服务器允许访问资源，但是因发生请求未满足条件的情况
4. 400：请求报文存在错误
5. 403：表示请求的资源访问被服务器拒绝
6. 404：表示请求的资源在服务器上没有找到
7. 500：表示服务器在执行请求时发生了错误
8. 501：表示服务器不支持当前请求所需要的某个功能
9. 503：表明服务器暂时处于超负载或正在停机维修，无法处理请求（服务器崩了）

### HTTP2

HTTP2相比于HTTP1，可以说是大幅度提高了网页的性能

在HTTP1中，为了性能考虑，我们会引入雪碧图。将小图内联，使用更多个域名等等的方式，这一切都因为浏览器限制了同一个域名下的请求数量（Chrome下一般是限制六个连接），当页面中需要请求很多资源的时候，队头阻塞会导致在达到最大请求数量时，剩余的资源需要等待其他资源请求完成之后才能发起请求

在HTTP2中引入了**多路复用**的技术，这个技术可以只通过一个TCP连接就可以传输所有的请求数据，多路复用很好的解决了浏览器限制同一域名下的请求数量的问题

**二进制传输**

HTTP2中所有加强性能的核心点都是引入了新的编码机制，所有传输的数据都会被分割，并采用二进制格式编码，在HTTP1中，我们是通过文本的方式传输数据的

**多路复用**

在HTTP2中有两个非常重要的概念：帧和流

帧代表最小的数据单位，每个帧会标识出该帧属于哪个流，流也就是有多个帧组成的数据流

多路复用，就是在一个TCP连接中可以存在多条流。换句话说，也就是可以发送多个请求，对端可以通过帧中的标识知道数据哪个请求。通过这个技术，可以避免HTTP旧版本中的队头阻塞问题，极大的提高了传输性能

**Header压缩**

在HTTP1中，我们使用文本的形式传输header，在header携带cookie的情况下，可能每次都需要重复传输几百到几千的字节

在HTTP2中，对header进行压缩，减少了header的大小，并在两端维护了索引表，用于记录出现过的header，后面再传输过程中就可以传输已经记录过的header的键名，就能找到对应的值

### HTTP3

